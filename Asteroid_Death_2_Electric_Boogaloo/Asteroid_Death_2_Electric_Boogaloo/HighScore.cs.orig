using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Xml;

namespace Asteroid_Death_2_Electric_Boogaloo
{
    public class HighScore
    {

        public static string FileLocation { get; private set; } = ".\\Content\\Highscore.xml";
<<<<<<< HEAD
        public static int MaxPlayers = 10;
=======
>>>>>>> Added HighScore class

        public static string[] GetHighScores()
        {
            XmlDocument xDoc = GetXmlDoc();

            XmlNodeList players = xDoc.GetElementsByTagName("Player");
            XmlNodeList score = xDoc.GetElementsByTagName("Score");
            
            string[] strings = new string[players.Count];

            for (int i = 0; i < strings.Length; i++)
            {
                StringBuilder builder = new StringBuilder();
                builder.Append(players[i].InnerText + " ").Append(score[i].InnerText);
                strings[i] = builder.ToString();
            }
            return strings;
        }

<<<<<<< HEAD
        public static void SaveScore(String playerName, long score)
        {
            XmlDocument xDoc = GetXmlDoc();
            XmlNode root = xDoc.GetElementsByTagName("root")[0];
            XmlNodeList rootChildList = root.ChildNodes;
            XmlNode refNode = null;
            
            for (int i = 0; i < rootChildList.Count; i++)
            {
                if (rootChildList[i].Name.Equals("Score"))
                {
                    long childScore = long.Parse(rootChildList[i].InnerText);
                    if (score >= childScore)
                    {
                        break;
                    }
                    refNode = rootChildList[i];
                }
            }
=======
        public static void SaveScore(String playerName, int score)
        {
            XmlDocument xDoc = GetXmlDoc();
            XmlNode root = xDoc.GetElementsByTagName("root")[0];
>>>>>>> Added HighScore class

            XmlNode playerNode = xDoc.CreateElement("Player");
            playerNode.InnerText = playerName;

            XmlNode scoreNode = xDoc.CreateElement("Score");
            scoreNode.InnerText = score + "";

<<<<<<< HEAD
            root.InsertAfter(playerNode, refNode);
            root.InsertAfter(scoreNode, playerNode);

            if (root.ChildNodes.Count > MaxPlayers * 2)
            {
                rootChildList[MaxPlayers * 2 - 1].ParentNode.RemoveChild(rootChildList[MaxPlayers * 2 - 1]);
                rootChildList[MaxPlayers * 2 - 2].ParentNode.RemoveChild(rootChildList[MaxPlayers * 2 - 2]);
            }
=======
            root.AppendChild(playerNode);
            root.AppendChild(scoreNode);
>>>>>>> Added HighScore class
            
            xDoc.Save(FileLocation);
        }

        private static XmlDocument GetXmlDoc()
        {
            XmlDocument xDoc = new XmlDocument();
            xDoc.Load(FileLocation);
            return xDoc;
        }
<<<<<<< HEAD
        
=======

>>>>>>> Added HighScore class
    }
}
